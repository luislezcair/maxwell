<% if can? :manage, TechnicalService %>
  <div class="card">
    <div class="card-body">
      <%= search_form_for @q, url: technical_services_path, remote: true do |f| %>
        <div class="row">
          <div class="col-sm-4">
            <%= f.input :datetime_lteq, label: t('.search_form.period') do %>
              <div class="input-group input-daterange">
                <%= f.input_field :datetime_gteq, as: :string, class: 'form-control align-right mask-date', value: short_date(@q.datetime_gteq), autocomplete: 'off' %>
                <div class="input-group-append input-group-addon">
                  <span class="input-group-text">
                    <i class="fa fa-arrows-h"></i>
                  </span>
                </div>
                <%= f.input_field :datetime_lteq, as: :string, class: 'form-control align-right mask-date', value: short_date(@q.datetime_lteq), autocomplete: 'off' %>
              </div>
            <% end %>
          </div>

          <div class="col-sm-3">
            <%= f.input :technical_service_technicians_technician_id_eq, as: :select, collection: sorted_active_technicians, label: t('.search_form.technician'), include_blank: t('search_form.any') %>
          </div>

          <div class="col-sm-3">
            <%= f.input :total_cost_eq, label: t('.search_form.total_cost_type') do %>
              <div class="input-group">
                <%= f.input_field :total_cost_eq, as: :select, collection: total_cost_types, include_blank: t('search_form.any'), selected: total_cost_type_value(@q), class: 'form-control' %>
                <div class="input-group-append">
                  <button class="btn btn-primary" type="submit" data-toggle="tooltip" data-trigger="hover" title="<%= t('.search_form.tooltip.submit') %>">
                    <i class="fa fa-search"></i>
                  </button>
                </div>
              </div>
            <% end %>
          </div>

        </div>
      <% end %>
    </div>
  </div>
<% end %>

<div class="card">
  <div class="card-header data-header">
    <div class="title"><%= t('.header') %></div>

    <div>
      <% if can? :manage, TechnicalService %>
        <button type="submit" form="export_form" class="btn btn-sm btn-success" data-toggle="tooltip" data-trigger="hover" data-title="<%= t('.tooltip.export') %>">
          <i class="fa fa-table"></i>
        </button>
      <% end %>

      <% if can? :create, TechnicalService %>
        <%= link_to new_technical_service_path, id: 'button_new', class: 'btn btn-sm btn-primary', data: { toggle: 'tooltip', trigger: 'hover', title: t('.tooltip.new') } do %>
          <i class="fa fa-plus"></i>
        <% end %>
      <% end %>
    </div>
  </div>

  <div class="card-body">
    <div id="technical-services-table-container">
      <%= render 'technical_services_table' %>
    </div>
  </div>
</div>
